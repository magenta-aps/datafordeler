install find/python3_7

install C++ build tools
https://www.scivision.dev/python-windows-visual-c-14-required/ (required for python packages)

install virtualenv

The virtual environment needs to be installed under ..../datafordelere-admin/django eg ..../datafordelere-admin/django/env

install requirements.txt
set http_proxy=10.240.82.10:80
set https_proxy=10.240.82.10:80

install wfastcgi should be in requirements.txt
https://pypi.org/project/wfastcgi/

run wfastcgi-enable (to setup the paths) (ad administrator)

setup IIS
https://medium.com/@Jonny_Waffles/deploy-django-on-iis-def658beae92

the application pool needs to use the loggedin users identiy otherwise we cannot connect to sql.
Because we used windows authentication for the sql database.

Then you can set the environment variables to (FastCGI settings under the webserver) (not site specific settings!
DJANGO_SETTINGS_MODULE = dafoadmin_site.settings
PYTHONPATH = ...../datafordelere-admin/django
WSGI_HANDLER = dafoadmin_site.wsgi.application

Set the physical path (under site settings to the same as the pythonpath)

setup serving of static files as a virtual directory
setup a virtual directory where the virtual path is /static and the physical path is .../django/static_files

Then use collectstatic to collect all the static files to static_files

test url:
https://admin.test.data.gl/
prod:
https://admin.data.gl/


dafoadmintest